<html>
<head><title>Tomitribe.io</title>
    <link rel="shortcut icon" href="app/images/tt-fav.png">
    <base href='/' />
    <link rel="stylesheet" href="app/third-party/style/source.css"/>
    <link rel="stylesheet" href="app/style/app.css"/>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width">
    <script async="" src="https://www.googletagmanager.com/gtag/js?id=UA-38816470-2"></script>
</head>
<body>
<script>
    // check to get production analytics only
    window.PROD_ENV = location.host === "tomitribe.io";
    if (window.PROD_ENV) {
        window.GA_ID = 'UA-38816470-2';
        window.dataLayer = window.dataLayer || [];
        function gtag() {dataLayer.push(arguments);}
        window.gtag = gtag;

        gtag('js', new Date());
        gtag('config', window.GA_ID, { 'send_page_view': false });
    }

    const appendScript = (url) => {
        return new Promise(res => {
            const s = document.createElement("script");
            s.type = "text/javascript";
            s.async = true;
            s.src = url;
            s.onload = function() {
               res(); 
            }
            document.body.append(s);
        });
    };
    window.addEventListener('DOMContentLoaded',async (event) => {
        await ["app/third-party/source.js", "app/js/app.min.js"].reduce(async (acc, url) => {
            await acc;
            return appendScript(url);
        }, Promise.resolve()).then(console.log);
        angular.bootstrap(document, ['tribeio']);
    });
</script>
<ng-view autoscroll="true"></ng-view>
</body>
</html>
